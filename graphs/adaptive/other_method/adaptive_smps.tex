\documentclass[../../../IA.tex]{subfiles}

\begin{document}
\newcommand{\sumdiv}{\exampleLowSubintervals}
\newcommand{\leftbound}{-4}
\newcommand{\rightbound}{4}

\begin{figure}[ht]
    \centering
    \resizebox{.9\textwidth}{!}{
        \begin{tikzpicture}[extended line/.style={shorten >=-#1,shorten <=-#1}, spy using outlines={circle, magnification=9, size=2cm, connect spies}]
            \def\arr{-3.5, -3.25, -3.0, -2.75, -2.5, -2.25, -2.0, -1.875, -1.75, -1.625, -1.5, -1.25, -1.0, -0.75, -0.625, -0.5, -0.375, -0.25, -0.125, 0.0, 0.125, 0.25, 0.375, 0.5, 0.625, 0.75, 1.0, 1.25, 1.5, 1.625, 1.75, 1.875, 2.0, 2.25, 2.5, 2.75, 3.0, 3.25, 3.5, 4.0}
            \def\p{-4.0}
            \foreach \x in \arr
            {
                \pgfmathsetmacro\a{\p}
                \pgfmathsetmacro\m{(\p+\x)/2}
                \pgfmathsetmacro\b{\x}

                \pgfmathsetmacro\fA{\normalEq{\a}}
                \pgfmathsetmacro\fM{\normalEq{\m}}
                \pgfmathsetmacro\fB{\normalEq{\b}}
                
                % \draw[gray, thin] (\p, 0) -- (\p, \fA);
                % \draw[gray, thin] (\x, 0) -- (\x, \fB);
                
                \draw [gray, thin, pattern=north west lines, pattern color=gray] (\a, \fA) -- (\a, 0) -- (\b, 0) -- (\b, \fB);
                
                \xdef\p{\x}
            }

            \numline{\leftbound, ..., \rightbound}
            \graphNormal

            \def\SX{0.23}
            \coordinate (S) at (\SX, {\normalEq{\SX} - 0.08});
            \coordinate (SA) at ({\SX+.25}, -1.2);
            \spy [darkgray] on (S) in node [right] at (SA);
        \end{tikzpicture}
    }
    \vspace{-.5cm}
    \caption{A sketch demonstrating the accuracy of the established method of adaptive quadrature}
    \label{fig:other_adpt_smps}
\end{figure}
\end{document}

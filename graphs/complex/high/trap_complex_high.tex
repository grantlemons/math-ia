\documentclass[../../../IA.tex]{subfiles}

\begin{document}

\newcommand{\sumdiv}{\exampleHighSubintervals}
\newcommand{\leftbound}{-2.25}
\newcommand{\rightbound}{2.25}

\begin{figure}[hb]
    \centering
    \resizebox{.7\textwidth}{!}{
        \begin{tikzpicture}[extended line/.style={shorten >=-#1,shorten <=-#1}]
            \pgfmathparse{int(\sumdiv-1)}
            \foreach \i in {0, ..., \pgfmathresult}
            {
                \pgfmathsetmacro\Ax{\leftbound + (((\rightbound - \leftbound)/\sumdiv)*\i)}
                \pgfmathsetmacro\Bx{\leftbound + (((\rightbound - \leftbound)/\sumdiv)*(\i+1))}
                \pgfmathsetmacro\Ay{\complexEq{\Ax}}
                \pgfmathsetmacro\By{\complexEq{\Bx}}
                \coordinate (BL) at (\Ax, 0);
                \coordinate (BR) at (\Bx, 0);
                \coordinate (TL) at (\Ax, \Ay);
                \coordinate (TR) at (\Bx, \By);
		        \draw [gray, thin, pattern=north west lines, pattern color=gray] (BL) -- (BR) -- (TR) -- (TL) -- (BL);
            }

            \numline{-2.0, -1.0, 0, 1.0, 2.0}
            \graphComplex
        \end{tikzpicture}
    }
    \vspace{-.4cm}
    \caption{A sketch showing the effectiveness of the trapezoid rule on a complex function with a high subinterval count}
    \label{fig:trap_rule_complex_high}
\end{figure}
\end{document}
